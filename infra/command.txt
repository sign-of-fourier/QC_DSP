# when executing terraform apply for new changes
## Import the existing S3 bucket into Terraform stateImport the existing S3 bucket into Terraform state

terraform import aws_s3_bucket.bidreq_logs qc-dsp-bidreq-logs
terraform import aws_iam_role.firehose_role qc-dsp-firehose-role
#Get your AWS account ID
aws sts get-caller-identity --query Account --output text
545799749052
#for aws_kinesis_firehose_delivery_stream, Terraform expects the import ID to be the full ARN
terraform import \
  aws_kinesis_firehose_delivery_stream.google_bidreq \
  arn:aws:firehose:us-east-1:545799749052:deliverystream/qc-dsp-google-bidreq-firehose
#Now that Terraform knows those resources already exist:

terraform plan

#It should no longer try to create:

terraform apply

# build & run 
go run ./cmd/bidder

#Send test Protobuf requests
curl -X POST http://localhost:8080/test-log  

#test the sinks in s3
aws s3 ls s3://qc-dsp-bidreq-logs/bid_requests/ --recursive

aws s3 cp s3://qc-dsp-bidreq-logs/bid_requests/dt=2026-02-01/hr=17/part-...json.gz .

gunzip part-...json.gz

head part-...json